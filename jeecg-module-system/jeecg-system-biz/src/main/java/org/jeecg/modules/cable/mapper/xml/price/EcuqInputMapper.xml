<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="org.jeecg.modules.cable.mapper.dao.price.EcuqInputMapper">

    <!--column-->
    <resultMap id="BaseResultMap" type="org.jeecg.modules.cable.entity.price.EcuqInput">
        <id column="ecuqi_id" jdbcType="INTEGER" property="ecuqiId"/>
        <result column="ecuq_id" jdbcType="INTEGER" property="ecuqId"/>
        <result column="ecqul_id" jdbcType="INTEGER" property="ecqulId"/>
        <result column="store_id" jdbcType="INTEGER" property="storeId"/>
        <result column="start_type" jdbcType="BIT" property="startType"/>
        <result column="sort_id" jdbcType="INTEGER" property="sortId"/>
        <result column="silk_name" jdbcType="VARCHAR" property="silkName"/>
        <result column="silk_name_as" jdbcType="VARCHAR" property="silkNameAs"/>
        <result column="silk_name_input" jdbcType="BIT" property="silkNameInput"/>
        <result column="area_str" jdbcType="VARCHAR" property="areaStr"/>
        <result column="area_str_as" jdbcType="VARCHAR" property="areaStrAs"/>
        <result column="area_str_input" jdbcType="VARCHAR" property="areaStrInput"/>
        <result column="sale_number" jdbcType="INTEGER" property="saleNumber"/>
        <result column="ecbulu_id" jdbcType="INTEGER" property="ecbuluId"/>
        <result column="profit" jdbcType="DECIMAL" property="profit"/>
        <result column="profit_input" jdbcType="BIT" property="profitInput"/>
        <result column="bill_percent" jdbcType="DECIMAL" property="billPercent"/>
        <result column="item_desc" jdbcType="VARCHAR" property="itemDesc"/>
    </resultMap>

    <resultMap id="UnionResultMap" type="org.jeecg.modules.cable.entity.price.EcuqInput">
        <id column="ecuqi_id" jdbcType="INTEGER" property="ecuqiId"/>
        <result column="ecuq_id" jdbcType="INTEGER" property="ecuqId"/>
        <result column="ecqul_id" jdbcType="INTEGER" property="ecqulId"/>
        <result column="store_id" jdbcType="INTEGER" property="storeId"/>
        <result column="start_type" jdbcType="BIT" property="startType"/>
        <result column="sort_id" jdbcType="INTEGER" property="sortId"/>
        <result column="silk_name" jdbcType="VARCHAR" property="silkName"/>
        <result column="silk_name_as" jdbcType="VARCHAR" property="silkNameAs"/>
        <result column="silk_name_input" jdbcType="VARCHAR" property="silkNameInput"/>
        <result column="area_str" jdbcType="VARCHAR" property="areaStr"/>
        <result column="area_str_as" jdbcType="VARCHAR" property="areaStrAs"/>
        <result column="area_str_input" jdbcType="VARCHAR" property="areaStrInput"/>
        <result column="sale_number" jdbcType="INTEGER" property="saleNumber"/>
        <result column="ecbulu_id" jdbcType="INTEGER" property="ecbuluId"/>
        <result column="profit" jdbcType="DECIMAL" property="profit"/>
        <result column="profit_input" jdbcType="BIT" property="profitInput"/>
        <result column="bill_percent" jdbcType="DECIMAL" property="billPercent"/>
        <result column="item_desc" jdbcType="VARCHAR" property="itemDesc"/>
        <!-- 仓库 -->
        <association property="ecbuStore" javaType="org.jeecg.modules.cable.entity.userCommon.EcbuStore">
            <result column="store_name" property="storeName"/>
        </association>
        <!-- 丝类型 -->
        <association property="ecSilk" javaType="org.jeecg.modules.cable.entity.systemEcable.EcSilk">
            <result column="ecs_abbreviation" property="abbreviation"/>
        </association>
        <!-- 质量等级 -->
        <association property="ecquLevel" javaType="org.jeecg.modules.cable.entity.quality.EcquLevel">
            <result column="name" property="name"/>
        </association>
    </resultMap>

    <sql id="Base_Column_List">
        ecuqi_id
        , ecuq_id, ecqul_id, store_id, start_type, sort_id, silk_name, silk_name_as, area_str, area_str_as,
    sale_number, ecbulu_id, profit, profit_input, bill_percent, item_desc
    </sql>

    <!-- With_List -->
    <sql id="With_List">
        ecuqi
        .
        ecuqi_id
        , ecuqi.ecuq_id, ecuqi.ecqul_id, ecuqi.store_id, ecuqi.start_type, ecuqi.sort_id, ecuqi.silk_name,
        ecuqi.silk_name_as, ecuqi.silk_name_input, ecuqi.area_str, ecuqi.area_str_as, ecuqi.area_str_input,
        ecuqi.sale_number, ecuqi.ecbulu_id, ecuqi.profit, ecuqi.profit_input, ecuqi.bill_percent,
        ecuqi.item_desc,
        ecbustore.store_name,
        ecqul.name,
        ecs.abbreviation as ecs_abbreviation
    </sql>

    <select id="getList" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput" resultMap="UnionResultMap">
        select
        <include refid="With_List"/>
        from ecuq_input as ecuqi
        left join ecbu_store as ecbustore on ecuqi.store_id=ecbustore.ecbus_id
        left join ecqu_level as ecqul on ecuqi.ecqul_id=ecqul.ecqul_id
        left join ec_silk as ecs on ecqul.ecs_id=ecs.ecs_id
        <where>
            <if test="startType!=null">
                and ecuqi.start_type=#{startType,jdbcType=BIT}
            </if>
            <if test="ecuqId!=null">
                and ecuqi.ecuq_id=#{ecuqId,jdbcType=INTEGER}
            </if>
        </where>
        order by ecuqi.sort_id asc
    </select>

    <!--getCount-->
    <select id="getCount" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput" resultType="java.lang.Long">
        select count(*) from ecuq_input
        <where>
            <if test="startType!=null">
                and ecuqi.start_type=#{startType,jdbcType=BIT}
            </if>
            <if test="ecuqId!=null">
                and ecuqi.ecuq_id=#{ecuqId,jdbcType=INTEGER}
            </if>
        </where>
    </select>

    <!-- getObject -->
    <select id="getObject" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from ecuq_input
        <where>
            <if test="ecuqiId != null">
                and ecuqi_id = #{ecuqiId,jdbcType=INTEGER}
            </if>
        </where>
        limit 1
    </select>

    <!--insert-->
    <insert id="insert" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput">
        insert into ecuq_input (ecuqi_id, ecuq_id, ecqul_id,
                                store_id, start_type, sort_id,
                                silk_name, silk_name_as, silk_name_input, area_str, area_str_as,
                                area_str_input, sale_number,
                                ecbulu_id, profit, profit_input, bill_percent, item_desc)
        values (#{ecuqiId,jdbcType=INTEGER}, #{ecuqId,jdbcType=INTEGER}, #{ecqulId,jdbcType=INTEGER},
                #{storeId,jdbcType=INTEGER}, #{startType,jdbcType=BIT}, #{sortId,jdbcType=INTEGER},
                #{silkName,jdbcType=VARCHAR}, #{silkNameAs,jdbcType=VARCHAR}, #{silkNameInput,jdbcType=BIT},
                #{areaStr,jdbcType=VARCHAR},
                #{areaStrAs,jdbcType=VARCHAR}, #{areaStrInput,jdbcType=BIT}, #{saleNumber,jdbcType=INTEGER},
                #{ecbuluId,jdbcType=INTEGER}, #{profit,jdbcType=DECIMAL}, #{profitInput,jdbcType=BIT},
                #{billPercent,jdbcType=DECIMAL}, #{itemDesc,jdbcType=VARCHAR})
    </insert>

    <!-- getListGreaterThanSortId -->
    <select id="getListGreaterThanSortId" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from ecuq_input
        <where>
            <if test="ecuqId != null">
                and ecuq_id=#{ecuqId}
            </if>
            <if test="sortId != null">
                and <![CDATA[sort_id > #{sortId,jdbcType=INTEGER}]]>
            </if>
        </where>
    </select>

    <!-- delete -->
    <delete id="delete" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput">
        delete from ecuq_input
        <where>
            <if test="ecuqiId != null">
                and ecuqi_id = #{ecuqiId,jdbcType=INTEGER}
            </if>
        </where>
    </delete>

    <update id="update" parameterType="org.jeecg.modules.cable.entity.price.EcuqInput">
        update ecuq_input
        <set>
            <if test="ecuqId != null">
                ecuq_id = #{ecuqId,jdbcType=INTEGER},
            </if>
            <if test="ecqulId != null">
                ecqul_id = #{ecqulId,jdbcType=INTEGER},
            </if>
            <if test="storeId != null">
                store_id = #{storeId,jdbcType=INTEGER},
            </if>
            <if test="startType != null">
                start_type = #{startType,jdbcType=BIT},
            </if>
            <if test="sortId != null">
                sort_id = #{sortId,jdbcType=INTEGER},
            </if>
            <if test="silkName != null">
                silk_name = #{silkName,jdbcType=VARCHAR},
            </if>
            <if test="silkNameAs != null">
                silk_name_as = #{silkNameAs,jdbcType=VARCHAR},
            </if>
            <if test="silkNameInput != null">
                silk_name_input = #{silkNameInput,jdbcType=BIT}
            </if>
            <if test="areaStr != null">
                area_str = #{areaStr,jdbcType=VARCHAR},
            </if>
            <if test="areaStrAs != null">
                area_str_as = #{areaStrAs,jdbcType=VARCHAR},
            </if>
            <if test="areaStrInput != null">
                area_str_input = #{areaStrInput,jdbcType=BIT}
            </if>
            <if test="saleNumber != null">
                sale_number = #{saleNumber,jdbcType=INTEGER},
            </if>
            <if test="ecbuluId != null">
                ecbulu_id = #{ecbuluId,jdbcType=INTEGER},
            </if>
            <if test="profit != null">
                profit = #{profit,jdbcType=DECIMAL},
            </if>
            <if test="profitInput != null">
                profit_input = #{profitInput,jdbcType=BIT},
            </if>
            <if test="billPercent != null">
                bill_percent = #{billPercent,jdbcType=DECIMAL},
            </if>
            <if test="itemDesc != null">
                item_desc = #{itemDesc,jdbcType=VARCHAR},
            </if>
        </set>
        <where>
            <if test="ecuqiId != null">
                ecuqi_id = #{ecuqiId,jdbcType=INTEGER}
            </if>
        </where>
    </update>

    <!-- getLatestObject -->
    <select id="getLatestObject" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from ecuq_input
        <where>
            <if test="ecuqId != null">
                AND ecuq_id = #{ecuqId,jdbcType=INTEGER}
            </if>
        </where>
        order by sort_id desc
        limit 1
    </select>


</mapper>


